- 4.5 Type index erasure
- 4.5 タイプインデックス消去

	In general, there are two directions for extending a type system such as the one in ML:
	One is to extend it so that more programs can be admitted as type-correct, and the other is to extend it so that programs can be assigned more accurate types.
	In this paper, we are primarily interested in the latter as is shown below.

	一般に、このようなMLにあるような型システムを拡張するための2つの方向があります。
	一つは、複数のプログラムタイプ正しいと認められることができるようにそれを拡張することで、他のプログラムが、より正確なタイプを割り当てることができるようにそれを拡張することである。
	本稿では、以下に示すように、後者で主に興味を持っています。

	----

	We can define a function | · | in Figure 19 that translates types, contexts and expressions in λΠ,Σ pat into types, contexts and expressions in λpat, respectively.
	In particular, for each type family δ in λΠ,Σ pat , we assume that there is a corresponding type δ in λpat, and for each constant c of c-type Πφ.P~ ⊃ (τ ⇒ δ(~I)) in λΠ,Σ pat , we assume that c is assigned the c-type |τ | ⇒ δ in λpat.

	私たちは、関数を定義することができます|·|それぞれ、λpatの型、コンテキストおよび式にλΠ、Σのパットの型、文脈や表現を変換し、図19で。
	特に、λΠ、Σパットの各型族δのために、我々はそこλpatで対応する型のδであり、ことを前提とC型Πφ.P〜⊃（τ⇒δ（〜I））の各定数cでのためにτ| |λpatにδを⇒λΠ、Σのパットは、我々は、cは、C型が割り当てられていることを前提としています。

	- Theorem 4.13

		Assume that φ; P~ ; Γ |- e : τ is derivable in λ Π,Σ pat .
		Then |Γ| |- |e| : |τ | is derivable in λpat.

		そのφを前提としています。 P〜; Γ| - E：τは、λΠ、Σパットで導出可能。
		その後、|Γ| | - | E |：|τは|λpatで導出可能。

		- Proof

			(Sketch) By structural induction on the derivation of φ; P~; Γ |- e : τ . □

			φの導出に関する構造的帰納法（スケッチ）; P〜; Γ| - E：τ。□

	----

		|δ(~I)| = δ
		|1| = 1
		|τ1 ∗ τ2| = |τ1| ∗ |τ2|
		|τ1 → τ2| = |τ1| → |τ2|
		|P ⊃ τ | = |τ |
		|Πa:s. τ | = |τ |
		|P ∧ τ | = |τ |
		|Σa:s. τ | = |τ |
		|∅| = ∅
		|Γ, xf : τ | = |Γ|, xf : |τ |
		|xf | = xf
		|c(e)| = c(|e|)
		|case e of (p1 ⇒ e1 | . . . | pn ⇒ en)| = case |e| of (p1 ⇒ |e1| | . . . | pn ⇒ |en|)
		|hi| = hi
		|<e1, e2>| = h|e1|, |e2|i
		|fst(e)| = fst(|e|)
		|snd(e)| = snd(|e|)
		|lam x. e| = lamx. |e|
		|e1(e2)| = |e1|(|e2|)
		|fix f. e| = fix f. |e|
		|⊃+(e)| = |e|
		|⊃−(e)| = |e|
		|Π+(e)| = |e|
		|Π−(e)| = |e|
		| ∧(e)| = |e|
		|let ∧(x) = e1 in e2 end| = let x = |e1| in |e2| end
		|Σ(e)| = |e|
		|let Σ(x) = e1 in e2 end| = let x = |e1| in |e2| end

	Fig. 19. The erasure function | · | on types, contexts and expressions in λΠ,Σ pat

	イチジク。·| |λΠ内の型、コンテキストおよび式の、Σパット19の消去機能

	Given a closed expression e0 in λpat, we say that e0 is typable in λpat if ∅ |- e0 : τ0 is derivable for some type τ0; and we say that e0 is typable in λΠ,Σ pat if there exists an expression e in λΠ,Σ pat such that |e| = e0 and ∅; ∅; ∅ |- e : τ is derivable for some type τ .

	Then by Theorem 4.13, we know that if an expression e in λpat is typable in λΠ,Σ pat then it is already typable in λpat. In other words, λΠ,Σ pat does not make more expressions in λpat typable.


	クローズ表現E0λpatで考えると、私たちはE0はλpatで型付け可能であると言うなら∅| - E0：τ0は、いくつかのタイプのτ0ための導出可能。 E| |と我々はE0はλΠで型付け可能であると言う、ΣのパットはλΠで式e、Σパットように存在する場合= E0とを∅。 ∅。 ∅| - E：τはいくつかのタイプのτのために導出可能。

	その後、定理4.13により、我々はλpatで式eがλΠで型付け可能である場合、Σのパットが、それはλpatですでに型付け可能であることを知っている。言い換えれば、λΠは、Σのパットはλpat型付けで複数の式を作成しません。

	- Theorem 4.14

		Assume that ∅; ∅; ∅ |- e : τ is derivable.

		1. If e ,→∗ev v in λΠ,Σ pat , then |e| ,→∗ev |v| in λpat.
		2. If |e| ,→∗ev v0 in λpat, then there is a value v such that e ,→∗ev v in λΠ,Σ pat and |v| = v0.

		その∅を前提としています。 ∅。∅| - E：τが導出可能。

		1.もしE、→*λΠでのEV V、Σパット、その後| E |、→* EV| V |λpatで。
		2.もし| E| V| |= V0、→* EV V0はλpatで、その後→*λΠでのEV V、Σパットと、値v、電子ことがあります。

		- Proof

			(Sketch) It is straightforward to prove (1).
			As for (2), it follows from structural induction on the derivation of ∅; ∅; ∅ |- e : τ . □

			（スケッチ）それは（1）証明することは簡単である。
			（2）、それは∅の導出に構造上の誘導から、次のについては、 ∅。 ∅| - E：τ。 □

	Theorem 4.14 indicates that we can evaluate a well-typed program in λΠ,Σ pat by first erasing all the markers Π+(·), Π−(·), ⊃+(·), ⊃−(·), Σ(·) and ∧(·) in the program and then evaluating the erasure in λpat.
	Combining Theorem 4.13 and Theorem 4.14, we say that λΠ,Σ pat is a conservative extension of λpat in terms of both static and dynamic semantics.

	定理4.14は、我々が最初にすべてのマーカーのΠ+（·）、Π-（·）、⊃+（·）、⊃-（·）、Σ（·を消去することによりλΠ、Σのパットではよく型付けされたプログラムを評価できることを示しています）と∧（·）プログラムで、その後λpatで消去を評価する。
	定理4.13と定理4.14組み合わせることで、私たちはλΠ、Σパットは、静的および動的な意味論の両面でλpatの保守的な拡張があると言う。
