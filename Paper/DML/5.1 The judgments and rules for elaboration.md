- 5.1 The judgments and rules for elaboration

- 5.1 精緻化のための判断とルール

	We introduce a new form of judgment φ; P~ ` E : τ1 ≤ τ2, which we call dynamic subtype judgment.

	We may write φ; P~ ` τ1 ≤ τ2 to mean φ; P~ ` E : τ1 ≤ τ2 for some evaluation context E.

	The rules for deriving such a new form of judgment are given in Figure 21.

	We are to establish that if φ; P~ ` E : τ ≤ τ0 is derivable, then φ; P~ |= E : τ ≤d tp τ0 holds, that is, for any expression e of type τ , E[e] can be assigned the type τ0 and |e| ≤dyn |E[e]| holds.

	我々は、判定φの新しい形をご紹介。我々は、動的なサブタイプの判断を呼び出すτ1さ≤τ2、：P〜 `E。

	我々は、φを書くことができ、 P〜 `τ1≤τ2はφを意味する。 P〜 `E：τ1≤τ2いくつかの評価コンテキストE.用

	判決のような新しい形を導出するためのルールを図21に示す。

	我々は確立していることをφの場合、 P〜 `E：τの≤のτ0はその後、導出φである。 P〜|= E：| E |≤dyn| E [E]|保持τ≤dTPτ0は、タイプτ、E[E]型τ0とを割り当てることができるの任意の式Eの、ある、成り立つ。

	----

	There is another new form of judgment φ; P~; Γ ` e ↓ τ ⇒ e involved in the rule (dy-sub-prod) and the rule (dy-sub-fun), and the rules for deriving such a judgment, which we call analysis elaboration judgment, are to be presented next.

	判定φの別の新しい形があります。 P〜; Γ`ルール（DY-サブPROD）とルール（DY-サブ楽しい）、そして我々は、分析推敲判断を呼び出すような判断を導出するためのルール、に関与E↓のτの⇒eは、次の提示される。
	
	----

	We actually have two forms of elaboration judgments involved in the process of elaborating expressions from DML0 to λΠ,Σ pat .

	我々は、実際にλΠ、ΣのパットにDML0から表現を起草の過程に関与して精緻化の判断の2つの形式があります。

	- A synthesis elaboration judgment is of the form φ; P~; Γ ` e ↑ τ ⇒ e, which means that given φ, P~ , Γ and e, we can find a type τ and an expression e such that φ; P~ ; Γ ` e : τ is derivable and |e| ≤dyn |e| holds.
		Intuitively, τ can be thought of as being synthesized through an inspection on the structure of e.
	- An analysis elaboration judgment is of the form φ; P~ ; Γ ` e ↓ τ ⇒ e, which means that given φ; P~ ; Γ, e and τ , we can find an expression e such that φ; P~; Γ ` e : τ is derivable and |e| ≤dyn |e| holds.
	
	- 合成推敲判定をフォームφのです。 P〜; φ与えられた、P〜、Γ、eは、我々は型τとそのような式eφことを見つけることができることを意味Γ`E↑τ⇒E; P〜; Γ`E：と導出τは| E |≤dyn| eは|成り立つ。
	直感的に、τは、電子の構造上の検査を経て合成されると考えることができる。
	- 分析推敲判定をフォームφのです。 P〜; φを与えられたことを意味Γ`E↓のτの⇒のE; P〜; Γ、E、τは、我々は、式、電子φことを見つけることができます。 P〜; Γ`E：と導出τは| E |≤dyn| eは|成り立つ。

	We use |e| for the erasure of an expression e in DML0, which is obtained from erasing in e all occurrences of the markers Π+(·), Π−(·), ⊃ +(·), ⊃ −(·), Σ(·) and ∧(·).

	The erasure function is formally defined in Figure 24.

	我々が使用する| E | E中のマーカーの出現をすべて消去するから取得されるDML0で式e、の消去用Π+（·）、Π-（·）、⊃+（·）、⊃ - （·） 、Σ（·）と∧（·）。

	消去機能は、形式的に、図24に定義されている。

	----

	The rules for deriving synthesis and analysis elaboration judgments are given in Figure 22 and Figure 23, respectively.

	Note that there are various occasions where the two forms of elaboration judgments meet.

	For instance, when using the rule (elab-up-app-1) to elaborate e1(e2), we may first synthesize a type τ1 → τ2 for e1 and then check e2 against τ1.

	合成および分析精緻判断を導出するためのルールは、それぞれ、図22および図23に示されている。

	推敲の判断の二つの形態が出会う様々な機会があることに注意してください。

	E1（E2）を詳しく説明したルール（機能一覧アップAPP-1）を使用した場合、インスタンスのために、我々は第一種のτ1→τ2E1のを合成し、次いでτ1に対してE2チェック。
	----

	We next present some explanation on the elaboration rules.

	First and foremost, we emphasize that many elaboration rules are not syntax-directed.

	If in a case there are two or more elaboration rules applicable, the actual elaboration procedure should determine (based on some implementation strategies) which elaboration rule is to be chosen.

	We are currently not positioned to argue which implementation strategies are better than others, though we shall mention some key points about the strategies we have implemented.

	Given that the elaboration is not a form of pure type inference,1 it is difficult to even formalize the question as to whether an implementation of the elaboration is complete or not.

	我々は、次の精緻化ルールのいくつかの説明を提示する。

	まず第一に、我々は多くの精緻化ルールは、構文指向ではないことを強調する。

	ケースの中に2つ以上の精緻化ルール適用がある場合、実際の精緻化手順が選択されるべきである精緻化ルール（いくつかの実装戦略に基づいて）決定すべきである。

	我々が実施している戦略についていくつかの重要なポイントに言及しなければならないのに我々は、現在、他のものより優れているどの実装戦略主張するように配置されていません。

	純粋な型推論の形態1精緻でないことを考えることも精緻の実装が完了したか否かの質問を定式化することは困難である。